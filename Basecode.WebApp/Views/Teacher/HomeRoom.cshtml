@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Registrar";
    Layout = "~/Views/Shared/NoLayout.cshtml";
}
@using Basecode.Data.ViewModels
@model List<HomeRoom>

<link rel="stylesheet" href="/css/TeachersPage.css" />
<div class="wrapper">
    @await Html.PartialAsync("./_TeacherSideBar")
    <div class="main p-5">
        <p class="lead">Your Advisee</p>
        <div class="tab">
            @foreach (var classTeacher in Model)
            {
                string tab = classTeacher.Grade+" "+classTeacher.ClassName;
                <button class="tablinks" onclick="tabs(event, '@tab')" id="defaultOpen">Grade @tab</button>
            }
        </div>
        @foreach (var classTeacher in Model)
        {
            string tab = classTeacher.Grade + " " + classTeacher.ClassName;
            <div id="@tab" class="tabcontent">
                <div class="table-responsive">
                    <table class="table" id="myTable">
                        <thead>
                            <tr>
                                <th scope="col">Students</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var student in classTeacher.Students)
                            {
                                <tr class="bg-blue">
                                    <td class="pt-2">
                                        <div class="pl-lg-5 pl-md-3 pl-1 name">@student.FirstName @student.MiddleName, @student.LastName</div>
                                    </td>
                                    <td>
                                        <i class="lni lni-heart-fill mx-3" onclick="redirectToSubmitGradePage(@student.Student_Id)"></i>
                                        <i class="lni lni-list" onclick="redirectToAttendanccePage(@student.Student_Id)"></i>
                                    </td>
                                </tr>
                                <tr id="spacing-row">
                                    <td></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
    </div>
    <script>
        function redirectToSubmitGradePage(student_Id) {
            window.location.href = '@Url.Action("StudentValues", "Teacher")?studentId=' + student_Id;
        }
        function redirectToAttendanccePage(student_Id)
        {
            window.location.href = '@Url.Action("StudentAttendance", "Teacher")?studentId=' + student_Id;
        }
    </script>
</div>
<script src="/js/Tables.js"></script>