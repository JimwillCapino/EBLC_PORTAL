@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Registrar";
    Layout = "~/Views/Shared/NoLayout.cshtml";
}
@using Basecode.Data.ViewModels
@model int

<link rel="stylesheet" href="/css/TeachersPage.css" />
<script>
    $(document).ready(function () {
        var table = $("#table").DataTable({
            "processing": true, // for show progress bar
            "serverSide": true, // for process server side
            "filter": true, // this is for disable filter (search box)
            "orderMulti": true, // for disable multiple column at once
            "ajax": {
                "url": "/Teacher/HomeRoomStudentsDataTable?classid=" + @Model,
                "type": "POST",
                "datatype": "json"
            },
            "columnDefs": [{
                "targets": [0],
                "orderable": true
            },
            {
                "targets": [1],
                "orderable": true
            },
            {
                "targets": [2],
                "orderable": true
            }
            ],

            "columns": [
                { "data": "firstname", "name": "firstname" },
                { "data": "middlename", "name": "middlename" },
                { "data": "lastname", "name": "lastname" },
                {
                    data: null, render: function (data, type, row) {
                        return "<a href='#' onclick=redirectToSubmitGradePage('" + row.studentid + "','" + @Model+ "') class='btn btn-success'>Values</a> <a href='#' onclick=redirectToAttendanccePage('" + row.studentid + "') class='btn btn-warning'>Attendance</a>";
                    }
                }                              
            ]
        });       
    });       
</script>

<div class="wrapper">
    @await Html.PartialAsync("./_TeacherSideBar")
    <div class="main p-5" style="height:400px; overflow-y: auto;">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item" aria-current="page"><a asp-action="index">Home</a></li>
                <li class="breadcrumb-item" aria-current="page"><a asp-action="HomeRoom">Home Room</a></li>
                <li class="breadcrumb-item active" aria-current="page"><a>Advisee's</a></li>
            </ol>
        </nav>
        <div class="page-content page-container p-3 mx-lg-5" id="page-content">
         
        <div style="width:95%; margin:0 auto;">
            <h2>Your Advisee</h2>
            <table id="table" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Middle Name</th>
                        <th>Last Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        function redirectToSubmitGradePage(student_Id,classid) {
            window.location.href = '@Url.Action("StudentValues", "Teacher")?studentId=' + student_Id +'&classid='+ classid;
        }
        function redirectToAttendanccePage(student_Id) {
            window.location.href = '@Url.Action("StudentAttendance", "Teacher")?studentId=' + student_Id;
        }
    </script>
</div>
<script src="/js/Tables.js"></script>